<!DOCTYPE html>
<html lang="zh-CN">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>记录界面</title>
    <link rel="stylesheet" href="{{ url_for('static', filename= 'css/style_v2.css' ) }}">
    <link rel="stylesheet" href="{{ url_for('static', filename= 'css/button.css' ) }}">
    <link rel="stylesheet" href="{{ url_for('static', filename= 'css/send.css' ) }}">
    <link rel="stylesheet" href="{{ url_for('static', filename= 'css/notyf.css' ) }}">
    <style>
        /* 移动端优化：确保内容不被输入框遮挡 */
        @media (max-width: 768px) {
            .bg-gray-100 {
                padding-bottom: 100px !important;
                /* 在小屏幕上增加更多底部间距 */
            }
        }

        /* 横屏模式优化 */
        @media (max-height: 600px) and (orientation: landscape) {
            .bg-gray-100 {
                padding-bottom: 80px !important;
            }

            .input-container {
                bottom: 10px !important;
                padding: 8px !important;
            }
        }

        /* 安全区域适配 (iPhone X及以上有刘海的设备) */
        @supports (padding: env(safe-area-inset-bottom)) {
            .bg-gray-100 {
                padding-bottom: calc(80px + env(safe-area-inset-bottom)) !important;
            }

            @media (max-width: 768px) {
                .bg-gray-100 {
                    padding-bottom: calc(100px + env(safe-area-inset-bottom)) !important;
                }
            }
        }
    </style>
</head>

<body>


    <!--//消息展示 style="margin-bottom: 60px"-->
    <div class="bg-gray-100 p-4 pb-[80px]">
        {% for log in logs %}
        <div class="flex items-start space-x-2 mb-4" id="{{log.id}}"><span
                class="relative flex h-10 w-10 shrink-0 overflow-hidden rounded-full"><img
                    class="aspect-square h-full w-full" alt="User Avatar"
                    src="{{ url_for('static', filename= 'img/'+ log.img_path ) }}"></span>
            <div class="flex flex-col space-y-1">
                <div class="flex items-center space-x-2">
                    <span class="text-gray-500">{{ log.who_string }}</span>
                    <!--                <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"-->
                    <!--                     fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"-->
                    <!--                     class="h-4 w-4 text-red-500">-->
                    <!--                    <path d="M8.5 14.5A2.5 2.5 0 0 0 11 12c0-1.38-.5-2-1-3-1.072-2.143-.224-4.054 2-6 .5 2.5 2 4.9 4 6.5 2 1.6 3 3.5 3 5.5a7 7 0 1 1-14 0c0-1.153.433-2.294 1-3a2.5 2.5 0 0 0 2.5 2.5z"></path>-->
                    <!--                </svg>-->
                </div>
                <div class="bg-white p-2 rounded-md shadow-sm">
                    <p>{{ log.log_string }}</p>
                </div>
                <span class="text-xs text-gray-400" style="display:none;">{{ log.t }}</span>
            </div>
        </div>
        {% endfor %}
    </div>

    <ul class="wrapper scrollToBottomBtn">
        <li class="icon black other_com">
            <div style="opacity: 1; transform: none;">
                <button
                    class="flex items-center justify-center w-12 h-12 rounded-full shadow-lg transition-all duration-300 hover:shadow-xl"
                    tabindex="0"
                    style="background-color: rgb(230, 242, 255); border: 2px solid rgb(133, 184, 232); transform: none;">
                    <div style="color: rgb(0, 0, 0);">
                        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24">
                            <path fill="currentColor"
                                d="m12.05 19l2.85-2.825l-2.85-2.825L11 14.4l1.075 1.075q-.7.025-1.362-.225t-1.188-.775q-.5-.5-.763-1.15t-.262-1.3q0-.425.113-.85t.312-.825l-1.1-1.1q-.425.625-.625 1.325T7 12q0 .95.375 1.875t1.1 1.65t1.625 1.088t1.85.387l-.95.95zm4.125-4.25q.425-.625.625-1.325T17 12q0-.95-.363-1.888T15.55 8.45t-1.638-1.075t-1.862-.35L13 6.05L11.95 5L9.1 7.825l2.85 2.825L13 9.6l-1.1-1.1q.675 0 1.375.263t1.2.762t.763 1.15t.262 1.3q0 .425-.112.85t-.313.825zM12 22q-2.075 0-3.9-.788t-3.175-2.137T2.788 15.9T2 12t.788-3.9t2.137-3.175T8.1 2.788T12 2t3.9.788t3.175 2.137T21.213 8.1T22 12t-.788 3.9t-2.137 3.175t-3.175 2.138T12 22m0-2q3.35 0 5.675-2.325T20 12t-2.325-5.675T12 4T6.325 6.325T4 12t2.325 5.675T12 20m0-8" />
                        </svg>
                    </div>
                </button>
            </div>
        </li>
        {% if current_user.is_authenticated %}
        <!--退出账户按钮-->
        <li class="icon black square">
            <div style="opacity: 1; transform: none;">
                <button
                    class="flex items-center justify-center w-12 h-12 rounded-full shadow-lg transition-all duration-300 hover:shadow-xl"
                    tabindex="0"
                    style="background-color: rgb(230, 242, 255); border: 2px solid rgb(133, 184, 232); transform: none;">
                    <div style="color: rgb(0, 0, 0);">
                        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24">
                            <path fill="currentColor"
                                d="M6 19h3v-5q0-.425.288-.712T10 13h4q.425 0 .713.288T15 14v5h3v-9l-6-4.5L6 10zm-2 0v-9q0-.475.213-.9t.587-.7l6-4.5q.525-.4 1.2-.4t1.2.4l6 4.5q.375.275.588.7T20 10v9q0 .825-.588 1.413T18 21h-4q-.425 0-.712-.288T13 20v-5h-2v5q0 .425-.288.713T10 21H6q-.825 0-1.412-.587T4 19m8-6.75" />
                        </svg>
                    </div>
                </button>
            </div>
        </li>
        <li class="icon black logout">
            <div style="opacity: 1; transform: none;">
                <button
                    class="flex items-center justify-center w-12 h-12 rounded-full shadow-lg transition-all duration-300 hover:shadow-xl"
                    tabindex="0"
                    style="background-color: rgb(230, 242, 255); border: 2px solid rgb(133, 184, 232); transform: none;">
                    <div style="color: rgb(0, 0, 0);">
                        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24">
                            <path fill="currentColor"
                                d="M5 21q-.825 0-1.412-.587T3 19V5q0-.825.588-1.412T5 3h6q.425 0 .713.288T12 4t-.288.713T11 5H5v14h6q.425 0 .713.288T12 20t-.288.713T11 21zm12.175-8H10q-.425 0-.712-.288T9 12t.288-.712T10 11h7.175L15.3 9.125q-.275-.275-.275-.675t.275-.7t.7-.313t.725.288L20.3 11.3q.3.3.3.7t-.3.7l-3.575 3.575q-.3.3-.712.288t-.713-.313q-.275-.3-.262-.712t.287-.688z" />
                        </svg>
                    </div>
                </button>
            </div>
        </li>

        {% endif %}
        <!--向下滑动按钮-->
        <li class="icon black logout down111">
            <div style="opacity: 1; transform: none;">
                <button
                    class="flex items-center justify-center w-12 h-12 rounded-full shadow-lg transition-all duration-300 hover:shadow-xl"
                    tabindex="0"
                    style="background-color: rgb(230, 242, 255); border: 2px solid rgb(133, 184, 232); transform: none;">
                    <div style="color: rgb(0, 0, 0);">
                        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24">
                            <path fill="currentColor"
                                d="M12 21.9q-.2 0-.375-.075T11.3 21.6l-5.6-5.575q-.275-.275-.275-.7T5.7 14.6q.3-.3.713-.3t.712.3L11 18.5v-6.175q0-.425.288-.712t.712-.288t.713.288t.287.712V18.5l3.9-3.9q.275-.275.688-.275t.712.3q.275.275.275.7t-.275.7L12.7 21.6q-.15.15-.325.225T12 21.9m0-12.575q-.425 0-.712-.287T11 8.325v-1q0-.425.288-.712T12 6.325t.713.288t.287.712v1q0 .425-.288.713T12 9.325m0-5q-.425 0-.712-.287T11 3.325t.288-.712t.712-.288t.713.288t.287.712t-.288.713t-.712.287" />
                        </svg>
                    </div>
                </button>
            </div>
        </li>

    </ul>


    {% if current_user.is_authenticated %}
    <!--// 如果已经登录，显示发送按钮-->
    <div class="input-container">
        <input class="message-input" id="messageInput" placeholder="输入消息...">
        <button class="send-button" id="sendMessageBtn">发送</button>
    </div>
    {% else %}
    <!--// 如果未登录，则显示登录按钮-->
    <button
        class="login_button items-center whitespace-nowrap ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 h-10 flex w-full justify-center rounded-md bg-primary py-2 px-4 text-sm font-medium text-primary-foreground shadow-sm hover:bg-primary/90 focus:outline-none focus:ring-2 focus:ring-primary focus:ring-offset-2"
        type="submit" data-id="18" id="login_button">登录以发言
    </button>
    {% endif %}

    <script>
        var max_log_id = {{ max_log_id }};
        var min_log_id = {{ min_log_id }};
    </script>
    <script src="{{ url_for('static', filename= 'js/notyf.js' ) }}"></script>
    <script src="{{ url_for('static', filename= 'js/button.js' ) }}"></script>
    <script src="{{ url_for('static', filename= 'js/socket.js' ) }}"></script>
    <script src="{{ url_for('static', filename= 'js/message_v2.js' ) }}"></script>
    <script src="{{ url_for('static', filename= 'js/send.js' ) }}"></script>
    <script src="{{ url_for('static', filename= 'js/update_old_log.js' ) }}"></script>
    <script src="{{ url_for('static', filename= 'js/other_func.js' ) }}"></script>
</body>

</html>